import{r as a,a as h,j as e,F as s,B as j}from"./index-ee2b3aa9.js";const v=()=>{const[r,l]=a.useState(!1),[n,i]=a.useState(!1),[c,m]=a.useState(),p=h(),u=async t=>{const x={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userid:c,title:t.currentTarget.elements.namedItem("title").value,topic:t.currentTarget.elements.namedItem("topic").value,postcontent:t.currentTarget.elements.namedItem("postcontent").value})};t.preventDefault();try{const o=n&&await fetch("http://172.160.242.104:8000/createforumpost",x);(o&&await o.json()).rowCount===1?l(!r):l(!1)}catch{console.log("error")}finally{p("/")}},d=t=>{t.currentTarget.value!=="Topic"?i(!0):i(!1)};return a.useEffect(()=>{const t=JSON.parse(localStorage.getItem("items")||"");t&&m(t)},[]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col justify-center items-center",children:[e.jsx("h1",{className:"mt-16",children:"Create Post"}),r&&e.jsx("p",{children:"success"}),e.jsxs(s,{onSubmit:u,className:"w-50",children:[e.jsxs(s.Group,{className:"mb-1",controlId:"exampleForm.ControlInput1",children:[e.jsx(s.Label,{children:"Title"}),e.jsx(s.Control,{type:"text",name:"title",placeholder:""})]}),e.jsx("div",{className:"relative h-5 mb-2 mt-0",children:!n&&e.jsx("p",{className:"{!validation && 'hidden'}",children:"Choose a topic before submitting"})}),e.jsxs(s.Select,{onChange:d,name:"topic","aria-label":"Default select example",children:[e.jsx("option",{children:"Topic"}),e.jsx("option",{value:"programming",children:"Programming"}),e.jsx("option",{value:"Lifestyle",children:"Lifestyle"}),e.jsx("option",{value:"Computers",children:"Computers"})]}),e.jsxs(s.Group,{className:"mb-3",controlId:"exampleForm.ControlTextarea1",children:[e.jsx(s.Label,{children:"Content"}),e.jsx(s.Control,{name:"postcontent",style:{height:"500px"},as:"textarea",rows:3})]}),e.jsx("div",{className:"flex flex-col items-center justify-center",children:e.jsx(j,{style:{width:400},as:"input",variant:n?"primary":"secondary",type:"submit",value:"Submit"})})]})]})})};export{v as default};
