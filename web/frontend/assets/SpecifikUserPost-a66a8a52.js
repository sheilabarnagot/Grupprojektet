import{r as a,j as e,M as c,F as u,B as f,u as v,N as g}from"./index-ee2b3aa9.js";const S=({commentContent:t,postId:i,commentId:r,id:l,userName:m})=>{const[d,s]=a.useState(!1),[o,y]=a.useState(),h=()=>s(!1),N=async()=>{s(!0),await p()},C=async n=>{n.preventDefault();const x={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({postid:i,userid:l,parentcommentid:r,commentcontent:n.currentTarget.elements[0].value})},b=await(await fetch("http://172.160.242.104:8000/createusercomment",x)).json();return p(),b};async function p(){try{const n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({parentcommentid:r})},j=await(await fetch("http://172.160.242.104:8000/commentoncomment",n)).json();y(j)}catch(n){console.log(n)}}return e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:N,children:"reply to this comment"}),e.jsxs(c,{show:d,onHide:h,children:[e.jsx(c.Header,{style:{backgroundColor:"black"},closeButton:!0,children:e.jsx(c.Title,{children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("p",{children:m}),t]})})}),e.jsx(c.Body,{style:{backgroundColor:"black"},children:o&&o.map(n=>e.jsx("div",{children:e.jsxs("div",{className:"flex ",children:[e.jsxs("p",{className:"mr-2",children:[n.username,":"]}),e.jsx("p",{children:n.commentcontent})]})},n.commentid))}),e.jsxs(u,{onSubmit:C,children:[e.jsx(u.Control,{as:"textarea",placeholder:"Leave a comment here",style:{height:"100px"}}),e.jsxs(c.Footer,{style:{backgroundColor:"black"},children:[e.jsx(f,{style:{backgroundColor:"black"},as:"input",type:"submit",value:"Send"}),e.jsx(f,{variant:"secondary",onClick:h,children:"Close"})]})]})]})]})},k=()=>{const t=v(),[i,r]=a.useState(),[l,m]=a.useState([]),d=async()=>{const o=await(await fetch("http://172.160.242.104:8000/specifikPostComment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({postid:t[0].postid})})).json();m(o)};return a.useEffect(()=>{const s=JSON.parse(localStorage.getItem("items")||"");s&&r(s),d()},[]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col mt-36 h-screen items-center ",children:[e.jsx("h1",{children:t&&t[0].title}),e.jsx("p",{className:"underline mb-3",children:t&&t[0].topic}),e.jsxs("p",{className:"mb-3",children:["Author: ",t&&t[0].username]}),e.jsx("p",{className:"mb-3",children:t&&t[0].postcontent}),e.jsx("div",{className:"border-bottom w-8/12"}),e.jsx("div",{className:"w-full flex flex-col items-center",children:e.jsxs("div",{className:"w-96",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("h1",{className:"mt-4",children:"Comments"}),e.jsx(g,{style:{color:"orange"},to:`/post/createpost/${t[0].postid}`,children:"Comment this post"})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"border-bottom w-8/12 self"})}),e.jsx("div",{className:"self-start",children:l&&l.map((s,o)=>e.jsx("div",{className:"flex justify-center w-full",children:e.jsx("div",{className:"flex flex-col items-center w-full justify-center pt-10",children:s.commentcontent&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-center",children:[e.jsx("p",{className:"pr-10",children:s.username+":"}),e.jsx("p",{children:s.commentcontent})]}),e.jsx("div",{className:"items-end"}),e.jsx(S,{commentContent:s.commentcontent,postId:s.postid,commentId:s.commentid,userName:s.username,id:i})]})})},o))})]})})]})})};export{k as default};
